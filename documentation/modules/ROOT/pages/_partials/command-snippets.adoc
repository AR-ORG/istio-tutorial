=====
#tag::kgpow[]
ifndef::workshop[]
[tabs]
====
kubectl::
+
--
ifdef::k8s-labels[]
[#cmd-kgpow-{doc-sec}]
[source,bash,subs="attributes+,+macros"]
----
kubectl -n tutorial{namespace-suffix} get pods -l {k8s-labels} -w
----
endif::[]
ifndef::k8s-labels[]
[#cmd-kgpow-{doc-sec}]
[source, bash,subs="attributes+,+macros"]
----
kubectl -n tutorial{namespace-suffix} get pods -w
----
endif::[]
copyToClipboard::cmd-kgpow-{doc-sec}[]
--
oc::
+
--
endif::[]
ifdef::k8s-labels[]
[#cmd-kgpow-{doc-sec}-oc]
[source, bash,subs="attributes+,+macros"]
----
oc -n tutorial{namespace-suffix} get pods -l {k8s-labels} -w
----
endif::[]
ifndef::k8s-labels[]
[#cmd-kgpow-{doc-sec}-oc]
[source, bash,subs="attributes+,+macros"]
----
oc -n tutorial{namespace-suffix} get pods -w
----
endif::[]
copyToClipboard::cmd-kgpow-{doc-sec}-oc[]
ifndef::workshop[]
--
====
endif::[]

#end::kgpow[]

#tag::call-customer-svc[]
include::ROOT:partial$none.adoc[]
Wait until the status is `Running` and there are `2/2` pods in the `Ready` column. To exit, press kbd:[Ctrl+C]

[#invoke{doc-sec}-customer-endpoint]
[source,bash,subs="attributes+,+macros"]
----
curl http://customer-tutorial{namespace-suffix}.{appdomain}
----
copyToClipboard::invoke{doc-sec}-customer-endpoint[]

#end::call-customer-svc[]

#tag::istio-rules[]
ifndef::workshop[]
[tabs]
=====
kubectl::
+
[#istio-rules-{doc-sec}-{istio-file}]
[source,bash,subs="attributes+,+macros"]
----
kubectl -n tutorial{namespace-suffix} {k8s-cmd-opt} -f link:{github-repo}/{istiofiles-dir}/{istio-file}[istiofiles/{istio-file}]
----
copyToClipboard::istio-rules-{doc-sec}-{istio-file}[]
oc::
+
--
endif::[]
[#istio-rules-oc-{doc-sec}-{istio-file}]
[source,bash,subs="attributes+,+macros"]
----
oc -n tutorial{namespace-suffix} {k8s-cmd-opt} -f link:{github-repo}/{istiofiles-dir}/{istio-file}[istiofiles/{istio-file}]
----
copyToClipboard::istio-rules-oc-{doc-sec}-{istio-file}[]
ifndef::workshop[]
--
=====
endif::[]
#end::istio-rules[]

#tag::pod-ssh-exec[]
ifndef::workshop[]
[tabs]
====
kubectl::
+
--
[#cb-{doc-sec}-{deployment}-trigger-misbehave]
[source,bash,subs="attributes+,+macros"]
----
kubectl exec -it -n tutorial{namespace-suffix} \
  $(kubectl get pods -n tutorial{namespace-suffix} \
  |grep {deployment}|awk '{ print $1 }'|head -1) -c recommendation /bin/bash
----
copyToClipboard::cb-{doc-sec}-{deployment}-trigger-misbehave[]
--
oc::
+
--
endif::[]
[#cb-oc-{doc-sec}-{deployment}-trigger-misbehave]
[source,bash,subs="attributes+,+macros"]
----
oc exec -it -n tutorial{namespace-suffix} \
 $(oc get pods -n tutorial{namespace-suffix} \
 |grep {deployment}|awk '{ print $1 }'|head -1) -c recommendation /bin/bash
----
copyToClipboard::cb-oc-{doc-sec}-{deployment}-trigger-misbehave[]
ifndef::workshop[]
--
====
endif::[]
#end::pod-ssh-exec[]

#tag::scale-deployment[]
ifndef::workshop[]
[tabs]
====
kubectl::
+
[#scale-{doc-sec}-{deployment}]
[source,bash,subs="attributes+,+macros"]
----
kubectl scale deployment {deployment} --replicas={replicas} -n tutorial{namespace-suffix}
----
copyToClipboard::scale-{doc-sec}-{deployment}[]
oc::
+
endif::[]
[#oc-scale-{doc-sec}-{deployment}]
[source,bash,subs="attributes+,+macros"]
----
oc scale deployment {deployment} --replicas={replicas} -n tutorial{namespace-suffix}
----
copyToClipboard::oc-scale-{doc-sec}-{deployment}[]
ifndef::workshop[]
====
endif::[]
#end::scale-deployment[]
=====
